<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android自定义View | Leo Technology Stack</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.png">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/logo.png">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="架构师技术博客,简洁至上, 专注架构师学习与总结, 前端、后端等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.3bb95aac.css" as="style"><link rel="preload" href="/assets/js/app.547c0bf0.js" as="script"><link rel="preload" href="/assets/js/6.1a89cbae.js" as="script"><link rel="preload" href="/assets/js/45.38681ba2.js" as="script"><link rel="preload" href="/assets/js/8.e2c6a3e6.js" as="script"><link rel="prefetch" href="/assets/js/1.912e3d3a.js"><link rel="prefetch" href="/assets/js/10.82cdb692.js"><link rel="prefetch" href="/assets/js/100.e6df2e13.js"><link rel="prefetch" href="/assets/js/101.53d50b41.js"><link rel="prefetch" href="/assets/js/102.eeabe335.js"><link rel="prefetch" href="/assets/js/103.22c082fd.js"><link rel="prefetch" href="/assets/js/104.1ccf101d.js"><link rel="prefetch" href="/assets/js/105.a3973527.js"><link rel="prefetch" href="/assets/js/106.737c1dc3.js"><link rel="prefetch" href="/assets/js/107.e6b78f77.js"><link rel="prefetch" href="/assets/js/108.b7c7fbfb.js"><link rel="prefetch" href="/assets/js/109.1edc426f.js"><link rel="prefetch" href="/assets/js/11.f1f05bf4.js"><link rel="prefetch" href="/assets/js/110.4b78b142.js"><link rel="prefetch" href="/assets/js/111.801a106f.js"><link rel="prefetch" href="/assets/js/12.3d02dfd5.js"><link rel="prefetch" href="/assets/js/13.255dd60d.js"><link rel="prefetch" href="/assets/js/14.4cc8141e.js"><link rel="prefetch" href="/assets/js/15.77b69c82.js"><link rel="prefetch" href="/assets/js/16.7fb8fa37.js"><link rel="prefetch" href="/assets/js/17.be996721.js"><link rel="prefetch" href="/assets/js/18.7f070e4b.js"><link rel="prefetch" href="/assets/js/19.ceb71ad8.js"><link rel="prefetch" href="/assets/js/20.c3531b2c.js"><link rel="prefetch" href="/assets/js/21.3404c7fe.js"><link rel="prefetch" href="/assets/js/22.d0d9f085.js"><link rel="prefetch" href="/assets/js/23.ea73c53b.js"><link rel="prefetch" href="/assets/js/24.25b44380.js"><link rel="prefetch" href="/assets/js/25.21665fef.js"><link rel="prefetch" href="/assets/js/26.ac6e0f4f.js"><link rel="prefetch" href="/assets/js/27.b0704a94.js"><link rel="prefetch" href="/assets/js/28.6b225f49.js"><link rel="prefetch" href="/assets/js/29.d795e88d.js"><link rel="prefetch" href="/assets/js/30.d22e19e6.js"><link rel="prefetch" href="/assets/js/31.9bd609cb.js"><link rel="prefetch" href="/assets/js/32.89c0f729.js"><link rel="prefetch" href="/assets/js/33.fafb4a50.js"><link rel="prefetch" href="/assets/js/34.27f61e4b.js"><link rel="prefetch" href="/assets/js/35.bdc4c8c5.js"><link rel="prefetch" href="/assets/js/36.17e3324f.js"><link rel="prefetch" href="/assets/js/37.63a8b933.js"><link rel="prefetch" href="/assets/js/38.123fc86e.js"><link rel="prefetch" href="/assets/js/39.f5965d99.js"><link rel="prefetch" href="/assets/js/40.bfd857b2.js"><link rel="prefetch" href="/assets/js/41.8a429091.js"><link rel="prefetch" href="/assets/js/42.b9d2d685.js"><link rel="prefetch" href="/assets/js/43.5f42ec83.js"><link rel="prefetch" href="/assets/js/44.6621bc3d.js"><link rel="prefetch" href="/assets/js/46.84b74977.js"><link rel="prefetch" href="/assets/js/47.19e048b8.js"><link rel="prefetch" href="/assets/js/48.aa588943.js"><link rel="prefetch" href="/assets/js/49.48893c71.js"><link rel="prefetch" href="/assets/js/50.02ed7ee9.js"><link rel="prefetch" href="/assets/js/51.ee69d07f.js"><link rel="prefetch" href="/assets/js/52.404dc9dc.js"><link rel="prefetch" href="/assets/js/53.0c1601d3.js"><link rel="prefetch" href="/assets/js/54.972c1488.js"><link rel="prefetch" href="/assets/js/55.483ddf87.js"><link rel="prefetch" href="/assets/js/56.2d8dd133.js"><link rel="prefetch" href="/assets/js/57.8b7020b4.js"><link rel="prefetch" href="/assets/js/58.22d8d598.js"><link rel="prefetch" href="/assets/js/59.3e50fd36.js"><link rel="prefetch" href="/assets/js/60.6f3d10bf.js"><link rel="prefetch" href="/assets/js/61.18667437.js"><link rel="prefetch" href="/assets/js/62.75c34c32.js"><link rel="prefetch" href="/assets/js/63.2cb97ac4.js"><link rel="prefetch" href="/assets/js/64.eda63d4b.js"><link rel="prefetch" href="/assets/js/65.10f2fc27.js"><link rel="prefetch" href="/assets/js/66.8052e009.js"><link rel="prefetch" href="/assets/js/67.672f6155.js"><link rel="prefetch" href="/assets/js/68.dacf4f26.js"><link rel="prefetch" href="/assets/js/69.b942721f.js"><link rel="prefetch" href="/assets/js/7.956766b7.js"><link rel="prefetch" href="/assets/js/70.daa27754.js"><link rel="prefetch" href="/assets/js/71.80c17e36.js"><link rel="prefetch" href="/assets/js/72.8d85e956.js"><link rel="prefetch" href="/assets/js/73.8ae40049.js"><link rel="prefetch" href="/assets/js/74.0a72880c.js"><link rel="prefetch" href="/assets/js/75.9014353b.js"><link rel="prefetch" href="/assets/js/76.c9e8bd64.js"><link rel="prefetch" href="/assets/js/77.0c4cec8c.js"><link rel="prefetch" href="/assets/js/78.6d270f46.js"><link rel="prefetch" href="/assets/js/79.4e269ee7.js"><link rel="prefetch" href="/assets/js/80.4f18165f.js"><link rel="prefetch" href="/assets/js/81.fdf05680.js"><link rel="prefetch" href="/assets/js/82.0cb859b5.js"><link rel="prefetch" href="/assets/js/83.2d3d949f.js"><link rel="prefetch" href="/assets/js/84.1aa4e017.js"><link rel="prefetch" href="/assets/js/85.ade9b646.js"><link rel="prefetch" href="/assets/js/86.069bc62a.js"><link rel="prefetch" href="/assets/js/87.51a7429a.js"><link rel="prefetch" href="/assets/js/88.e797c959.js"><link rel="prefetch" href="/assets/js/89.5389c252.js"><link rel="prefetch" href="/assets/js/9.48caeb51.js"><link rel="prefetch" href="/assets/js/90.c581896b.js"><link rel="prefetch" href="/assets/js/91.d353de30.js"><link rel="prefetch" href="/assets/js/92.3105b496.js"><link rel="prefetch" href="/assets/js/93.416765e6.js"><link rel="prefetch" href="/assets/js/94.cb24b172.js"><link rel="prefetch" href="/assets/js/95.4f568635.js"><link rel="prefetch" href="/assets/js/96.43ea0146.js"><link rel="prefetch" href="/assets/js/97.917c1ec8.js"><link rel="prefetch" href="/assets/js/98.68621700.js"><link rel="prefetch" href="/assets/js/99.31b9c418.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c4af4257.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.558c275c.js"><link rel="prefetch" href="/assets/js/vendors~notification.578d7770.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3bb95aac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/leo.png" alt="Leo Technology Stack" class="logo"> <span class="site-name can-hide">Leo Technology Stack</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/#Android" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/front/#Web" class="nav-link">Web</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/rear/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/rear/#SpringBoot" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/rear/#数据库" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/rear/#Docker" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/rear/#netty" class="nav-link">Netty</a></li><li class="dropdown-item"><!----> <a href="/rear/#KubeSphere" class="nav-link">KubeSphere</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/linux/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/#linux" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/linux/#Android Framework" class="nav-link">Android Framework</a></li><li class="dropdown-item"><!----> <a href="/linux/#开源库" class="nav-link">开源库</a></li></ul></div></div><div class="nav-item"><a href="/thinking/" class="nav-link">思维</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a938d92/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/post/a/" class="nav-link">投资理财</a></li><li class="dropdown-item"><!----> <a href="/post/books/" class="nav-link">杂事记录</a></li><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>开源项目</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/markdown/" class="nav-link">Advance Markdown</a></li><li class="dropdown-subitem"><a href="https://github.com/leo94666/AnLibrary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AnLibrary
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.pixabay.com/photo/2021/04/22/06/40/duck-6198196_1280.jpg"> <div class="blogger-info"><h3>Leo</h3> <span>不知名的架构师</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/#Android" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/front/#Web" class="nav-link">Web</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/rear/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/rear/#SpringBoot" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/rear/#数据库" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/rear/#Docker" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/rear/#netty" class="nav-link">Netty</a></li><li class="dropdown-item"><!----> <a href="/rear/#KubeSphere" class="nav-link">KubeSphere</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/linux/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/#linux" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/linux/#Android Framework" class="nav-link">Android Framework</a></li><li class="dropdown-item"><!----> <a href="/linux/#开源库" class="nav-link">开源库</a></li></ul></div></div><div class="nav-item"><a href="/thinking/" class="nav-link">思维</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a938d92/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/post/a/" class="nav-link">投资理财</a></li><li class="dropdown-item"><!----> <a href="/post/books/" class="nav-link">杂事记录</a></li><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>开源项目</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/markdown/" class="nav-link">Advance Markdown</a></li><li class="dropdown-subitem"><a href="https://github.com/leo94666/AnLibrary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AnLibrary
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Android自定义View</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/0101010/#_1-屏幕坐标系" class="sidebar-link">1.屏幕坐标系</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/0101010/#_2-view坐标系" class="sidebar-link">2.View坐标系</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/0101010/#_3-motionevent中-get-和-getraw-的区别" class="sidebar-link">3.MotionEvent中 get 和 getRaw 的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/0101010/#一-前言" class="sidebar-link">一.前言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/0101010/#_1-为什么讲这个" class="sidebar-link">1.为什么讲这个？</a></li><li class="sidebar-sub-header"><a href="/pages/0101010/#_2-为什么对角的描述存在角度与弧度两种单位" class="sidebar-link">2.为什么对角的描述存在角度与弧度两种单位？</a></li></ul></li><li><a href="/pages/0101010/#二-角度与弧度的定义" class="sidebar-link">二.角度与弧度的定义</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/0101010/#android支持的颜色模式" class="sidebar-link">Android支持的颜色模式：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/0101010/#几种创建或使用颜色的方式" class="sidebar-link">几种创建或使用颜色的方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/0101010/#java中定义颜色" class="sidebar-link">Java中定义颜色</a></li><li class="sidebar-sub-header"><a href="/pages/0101010/#xml里定义颜色" class="sidebar-link">xml里定义颜色</a></li><li class="sidebar-sub-header"><a href="/pages/0101010/#在java里引用xml中定义的颜色" class="sidebar-link">在java里引用xml中定义的颜色</a></li></ul></li><li><a href="/pages/0101010/#颜色混合模式-alpha通道相关" class="sidebar-link">颜色混合模式(Alpha通道相关)</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-leo-wrapper "><div class="articleInfo-wrap" data-v-2c5db116><div class="articleInfo" data-v-2c5db116><ul class="breadcrumbs" data-v-2c5db116><li data-v-2c5db116><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-2c5db116></a></li> <li data-v-2c5db116><a href="/categories/?category=notes" title="分类" data-v-2c5db116>notes</a></li> <li data-v-2c5db116><a href="/categories/?category=%E5%89%8D%E7%AB%AF" title="分类" data-v-2c5db116>前端</a></li> <li data-v-2c5db116><a href="/categories/?category=Android" title="分类" data-v-2c5db116>Android</a></li></ul> <div class="info" data-v-2c5db116><div title="作者" class="author iconfont icon-touxiang" data-v-2c5db116><a href="https://github.com/leo94666" target="_blank" title="作者" class="beLink" data-v-2c5db116>Leo</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-2c5db116><a href="javascript:;" data-v-2c5db116>2022-04-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          Android自定义View
        </h1> <!----> <div class="theme-leo-content content__default"><ul><li><a href="#%E5%9F%BA%E7%A1%80">基础</a> <ul><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89view%E5%88%86%E7%B1%BB">自定义View分类</a></li> <li><a href="#%E5%9D%90%E6%A0%87%E7%B3%BB">坐标系</a></li></ul></li> <li><a href="#%E7%BB%A7%E6%89%BFview--%E7%BB%A7%E6%89%BFviewgroup">继承View &amp; 继承viewGroup</a> <ul><li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">构造函数</a></li> <li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89view">自定义View</a></li> <li><a href="#%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7">定义属性</a></li> <li><a href="#%E8%8E%B7%E5%8F%96xml%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7">获取XML定义属性</a></li> <li><a href="#%E7%BB%98%E7%94%BB%E6%B5%81%E7%A8%8B">绘画流程</a> <ul><li><a href="#onmeasure">onMeasure</a></li> <li><a href="#onlayout">onLayout</a></li> <li><a href="#ondraw">onDraw</a></li></ul></li></ul></li> <li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E5%90%88%E6%8E%A7%E4%BB%B6">自定义组合控件</a> <ul><li><a href="#%E7%BC%96%E5%86%99%E5%B8%83%E5%B1%80%E6%96%87%E4%BB%B6">编写布局文件</a></li> <li><a href="#%E5%AE%9E%E7%8E%B0%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95">实现构造方法</a></li> <li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96ui">初始化UI</a></li> <li><a href="#%E6%8F%90%E4%BE%9B%E5%AF%B9%E5%A4%96%E7%9A%84%E6%96%B9%E6%B3%95">提供对外的方法</a></li> <li><a href="#%E5%9C%A8%E5%B8%83%E5%B1%80%E5%BD%93%E4%B8%AD%E5%BC%95%E7%94%A8%E8%AF%A5%E6%8E%A7%E4%BB%B6">在布局当中引用该控件</a></li></ul></li> <li><a href="#%E7%BB%A7%E6%89%BF%E7%B3%BB%E7%BB%9F%E6%8E%A7%E4%BB%B6">继承系统控件</a></li> <li><a href="#%E8%BF%9B%E9%98%B6">进阶</a> <ul><li><a href="#paint%E4%B8%93%E9%A2%98">Paint专题</a></li> <li><a href="#cavcas%E4%B8%93%E9%A2%98">Cavcas专题</a></li> <li><a href="#path%E4%B8%93%E9%A2%98">Path专题</a></li> <li><a href="#bitmap%E4%B8%93%E9%A2%98">Bitmap专题</a></li></ul></li> <li><a href="#%E9%9D%A2%E8%AF%95">面试</a></li></ul> <hr> <h4 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h4> <h5 id="自定义view分类"><a href="#自定义view分类" class="header-anchor">#</a> 自定义View分类</h5> <table><thead><tr><th>类型</th> <th>定义</th></tr></thead> <tbody><tr><td>自定义组合控件</td> <td>将多个组件组合在一起</td></tr> <tr><td>继承系统组件</td> <td>继承Android自带UI控件，进行功能拓展</td></tr> <tr><td>继承View</td> <td>直接继承View，实现控件高度定制</td></tr> <tr><td>继承viewGroup</td> <td>直接接触ViewGroup类控件，比如LinearLayout等等</td></tr></tbody></table> <h5 id="坐标系"><a href="#坐标系" class="header-anchor">#</a> 坐标系</h5> <p>在Android坐标系中，以屏幕左上角作为原点，向右为x轴正方向，向下为y轴正方向，如图:</p> <p><img src="https://i.loli.net/2019/08/19/4cqi9Gw2jmoRneP.png" alt="Android坐标系"></p> <hr> <h4 id="继承view-继承viewgroup"><a href="#继承view-继承viewgroup" class="header-anchor">#</a> 继承View &amp; 继承viewGroup</h4> <h5 id="构造函数"><a href="#构造函数" class="header-anchor">#</a> 构造函数</h5> <p>无论是我们继承系统View还是直接继承View，都需要对构造函数进行重写，构造函数有多个，至少要重写其中一个才行。</p> <table><thead><tr><th>构造函数</th> <th>说明</th></tr></thead> <tbody><tr><td>DemoView(Context context)</td> <td>在java代码里new的时候会用到</td></tr> <tr><td>DemoView(Context context, AttributeSet attrs)</td> <td>在xml布局文件中使用时自动调用</td></tr> <tr><td>DemoView(Context context, AttributeSet attrs, int defStyleAttr)</td> <td>不会自动调用，如果有默认style时，在第二个构造函数中调用</td></tr> <tr><td>DemoView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes)</td> <td>只有在API版本&gt;21时才会用到,不会自动调用，如果有默认style时，在第二个构造函数中调用</td></tr></tbody></table> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoView</span> <span class="token keyword">extends</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
     <span class="token comment">/**
     * 在java代码里new的时候会用到
     * @param context
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 在xml布局文件中使用时自动调用
     * @param context
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 不会自动调用，如果有默认style时，在第二个构造函数中调用
     * @param context
     * @param attrs
     * @param defStyleAttr
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleAttr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 只有在API版本&gt;21时才会用到
     * 不会自动调用，如果有默认style时，在第二个构造函数中调用
     * @param context
     * @param attrs
     * @param defStyleAttr
     * @param defStyleRes
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleAttr<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleRes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">,</span> defStyleRes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoView</span> <span class="token keyword">extends</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
     <span class="token comment">/**
     * 在java代码里new的时候会用到
     * @param context
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 在xml布局文件中使用时自动调用
     * @param context
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 不会自动调用，如果有默认style时，在第二个构造函数中调用
     * @param context
     * @param attrs
     * @param defStyleAttr
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleAttr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 只有在API版本&gt;21时才会用到
     * 不会自动调用，如果有默认style时，在第二个构造函数中调用
     * @param context
     * @param attrs
     * @param defStyleAttr
     * @param defStyleRes
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DemoView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleAttr<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleRes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">,</span> defStyleRes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h5 id="自定义view"><a href="#自定义view" class="header-anchor">#</a> 自定义View</h5> <p>Android系统的控件以android开头的都是系统自带的属性。为了方便配置自定义View的属性，我们也可以自定义属性值。<br>
Android自定义属性可分为以下几步:</p> <ul><li>自定义一个View</li> <li>编写values/attrs.xml，在其中编写styleable和item等标签元素</li> <li>在布局文件中View使用自定义的属性（注意namespace）</li> <li>在View的构造方法中通过TypedArray获取</li></ul> <h5 id="定义属性"><a href="#定义属性" class="header-anchor">#</a> 定义属性</h5> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>declare-styleable</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--颜色--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>textColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>#000000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--布尔值--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>focusable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>boolean<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--尺寸值--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>layout_width<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>dimension<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--浮点值--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>fromAlpha<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>float<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--整型值--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testAttr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--字符串--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--百分数--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>pivotX<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>fraction<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--枚举值--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orientation<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enum</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enum</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attr</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--位或运算--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gravity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>flag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0x01<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>flag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0x02<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>flag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0x04<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>flag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0x08<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>flag</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center_vertical<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0x16<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attr</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--混合类型--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>background<span class="token punctuation">&quot;</span></span> <span class="token attr-name">format</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>reference|color<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>declare-styleable</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h5 id="获取xml定义属性"><a href="#获取xml定义属性" class="header-anchor">#</a> 获取XML定义属性</h5> <ul><li>TintTypedArray</li> <li>TypedArray</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="绘画流程"><a href="#绘画流程" class="header-anchor">#</a> 绘画流程</h5> <p><img src="https://i.loli.net/2019/08/20/ZlojWN4DiRIqnsL.png" alt="TIM图片20190820162213.png"></p> <ul><li><p>ViewRootImpl</p> <p>位于Android源码 frameworks/base/core/java/android/view/ViewRootImpl.java</p> <p>ViewRootImpl是连接WindowManager和DecorView的桥梁，View的绘制流程开始于ViewRootImpl得performTraversals方法，只有经过measure、layout、draw三个流程才能最终绘制出View;<br>
如上图: performTraversals()依次调用performMeasure()、performLayout()和performDraw()三个方法，分别完成顶级View的绘制;<br>
其中performMeasure()会调用measure()，measure()中又调用onMeasure()，实现对其所有子元素的measure过程，这样就完成了一次measure过程；接着子元素会重复父容器的measure过程，如此反复至完成整个View树的遍历(layout和draw同理).</p></li></ul> <p><img src="https://i.loli.net/2019/08/20/aUjsfOhwPZ9l763.png" alt="TIM截图20190820163003.png"></p> <p>View绘制流程如上图，其中最重要的三个方法:</p> <ul><li>onMeasure</li> <li>onLayout</li> <li>onDraw</li></ul> <h6 id="onmeasure"><a href="#onmeasure" class="header-anchor">#</a> onMeasure</h6> <ul><li>MeasureSpec</li></ul> <p>MeasureSpec主要方法:</p> <table><thead><tr><th>方法/变量</th> <th>说明</th> <th>对应</th></tr></thead> <tbody><tr><td>getMode(int mode)</td> <td>获取测量模式</td> <td></td></tr> <tr><td>getSize(int size)</td> <td>获取测量大小</td> <td></td></tr> <tr><td>makeMeasureSpec(int size,int mode)</td> <td>通过Mode和Size生成新的SpecMode</td> <td></td></tr> <tr><td>AT_MOST</td> <td>最大模式，View的尺寸有一个最大值，View不可以超过MeasureSpec当中的Size值</td> <td>match_parent</td></tr> <tr><td>EXACTLY</td> <td>精准模式，View需要一个精确值，这个值即为MeasureSpec当中的Size</td> <td>wrap_content</td></tr> <tr><td>UNSPECIFIED</td> <td>无限制，View对尺寸没有任何限制，View设置为多大就应当为多大</td> <td>一般系统内部使用</td></tr></tbody></table> <ul><li><p>setMeasuredDimension(int measuredWidth, int measuredHeight)<br>
该方法用来设置View的宽高，在我们自定义View时也会经常用到。</p></li> <li><p>getDefaultSize(int size, int measureSpec)</p> <p>该方法用来获取View默认的宽高</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token comment">/**
     * Utility to return a default size. Uses the supplied size if the
     * MeasureSpec imposed no constraints. Will get larger if allowed
     * by the MeasureSpec.
     *
     * @param size Default size for this view
     * @param measureSpec Constraints imposed by the parent
     * @return The size this view should be.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getDefaultSize</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> measureSpec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> size<span class="token punctuation">;</span>
        <span class="token keyword">int</span> specMode <span class="token operator">=</span> <span class="token class-name">MeasureSpec</span><span class="token punctuation">.</span><span class="token function">getMode</span><span class="token punctuation">(</span>measureSpec<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> specSize <span class="token operator">=</span> <span class="token class-name">MeasureSpec</span><span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span>measureSpec<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span>specMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token class-name">MeasureSpec</span><span class="token punctuation">.</span>UNSPECIFIED<span class="token operator">:</span>
            result <span class="token operator">=</span> size<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token class-name">MeasureSpec</span><span class="token punctuation">.</span>AT_MOST<span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token class-name">MeasureSpec</span><span class="token punctuation">.</span>EXACTLY<span class="token operator">:</span>
            result <span class="token operator">=</span> specSize<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h6 id="onlayout"><a href="#onlayout" class="header-anchor">#</a> onLayout</h6> <p>主要用于自定义ViewGroup</p> <p>常用方法有</p> <table><thead><tr><th>方法/变量</th> <th>说明</th> <th>对应</th></tr></thead> <tbody><tr><td>getChildCount()</td> <td></td> <td></td></tr> <tr><td>getChildAt()</td> <td></td> <td></td></tr> <tr><td>measureChild()</td> <td></td> <td></td></tr></tbody></table> <h6 id="ondraw"><a href="#ondraw" class="header-anchor">#</a> onDraw</h6> <ul><li>Step 1, draw the background, if needed</li> <li>skip step 2 &amp; 5 if possible (common case)
<ul><li>Step 3, draw the content</li> <li>Step 4, draw the children</li> <li>Step 7, draw the default focus highlight</li> <li></li></ul></li> <li>Step 2, save the canvas' layers</li> <li>Step 3, draw the content</li> <li>Step 4, draw the children</li> <li>Step 5, draw the fade effect and restore layers</li> <li>Step 6, draw decorations (foreground, scrollbars)</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token class-name">Canvas</span> canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> privateFlags <span class="token operator">=</span> mPrivateFlags<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">boolean</span> dirtyOpaque <span class="token operator">=</span> <span class="token punctuation">(</span>privateFlags <span class="token operator">&amp;</span> PFLAG_DIRTY_MASK<span class="token punctuation">)</span> <span class="token operator">==</span> PFLAG_DIRTY_OPAQUE <span class="token operator">&amp;&amp;</span>
                <span class="token punctuation">(</span>mAttachInfo <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>mAttachInfo<span class="token punctuation">.</span>mIgnoreDirtyState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mPrivateFlags <span class="token operator">=</span> <span class="token punctuation">(</span>privateFlags <span class="token operator">&amp;</span> <span class="token operator">~</span>PFLAG_DIRTY_MASK<span class="token punctuation">)</span> <span class="token operator">|</span> PFLAG_DRAWN<span class="token punctuation">;</span>

        <span class="token comment">/*
         * Draw traversal performs several drawing steps which must be executed
         * in the appropriate order:
         *
         *      1. Draw the background
         *      2. If necessary, save the canvas' layers to prepare for fading
         *      3. Draw view's content
         *      4. Draw children
         *      5. If necessary, draw the fading edges and restore layers
         *      6. Draw decorations (scrollbars for instance)
         */</span>

        <span class="token comment">// Step 1, draw the background, if needed</span>
        <span class="token keyword">int</span> saveCount<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dirtyOpaque<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">drawBackground</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// skip step 2 &amp; 5 if possible (common case)</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> viewFlags <span class="token operator">=</span> mViewFlags<span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> horizontalEdges <span class="token operator">=</span> <span class="token punctuation">(</span>viewFlags <span class="token operator">&amp;</span> FADING_EDGE_HORIZONTAL<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> verticalEdges <span class="token operator">=</span> <span class="token punctuation">(</span>viewFlags <span class="token operator">&amp;</span> FADING_EDGE_VERTICAL<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>verticalEdges <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>horizontalEdges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Step 3, draw the content</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dirtyOpaque<span class="token punctuation">)</span> <span class="token function">onDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Step 4, draw the children</span>
            <span class="token function">dispatchDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">drawAutofilledHighlight</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Overlay is part of the content and draws beneath Foreground</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mOverlay <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>mOverlay<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                mOverlay<span class="token punctuation">.</span><span class="token function">getOverlayView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dispatchDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Step 6, draw decorations (foreground, scrollbars)</span>
            <span class="token function">onDrawForeground</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Step 7, draw the default focus highlight</span>
            <span class="token function">drawDefaultFocusHighlight</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">debugDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">debugDrawFocus</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// we're done...</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/*
         * Here we do the full fledged routine...
         * (this is an uncommon case where speed matters less,
         * this is why we repeat some of the tests that have been
         * done above)
         */</span>

        <span class="token keyword">boolean</span> drawTop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> drawBottom <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> drawLeft <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> drawRight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token keyword">float</span> topFadeStrength <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> bottomFadeStrength <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> leftFadeStrength <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> rightFadeStrength <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>

        <span class="token comment">// Step 2, save the canvas' layers</span>
        <span class="token keyword">int</span> paddingLeft <span class="token operator">=</span> mPaddingLeft<span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token keyword">boolean</span> offsetRequired <span class="token operator">=</span> <span class="token function">isPaddingOffsetRequired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>offsetRequired<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            paddingLeft <span class="token operator">+=</span> <span class="token function">getLeftPaddingOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> left <span class="token operator">=</span> mScrollX <span class="token operator">+</span> paddingLeft<span class="token punctuation">;</span>
        <span class="token keyword">int</span> right <span class="token operator">=</span> left <span class="token operator">+</span> mRight <span class="token operator">-</span> mLeft <span class="token operator">-</span> mPaddingRight <span class="token operator">-</span> paddingLeft<span class="token punctuation">;</span>
        <span class="token keyword">int</span> top <span class="token operator">=</span> mScrollY <span class="token operator">+</span> <span class="token function">getFadeTop</span><span class="token punctuation">(</span>offsetRequired<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> bottom <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token function">getFadeHeight</span><span class="token punctuation">(</span>offsetRequired<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>offsetRequired<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            right <span class="token operator">+=</span> <span class="token function">getRightPaddingOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bottom <span class="token operator">+=</span> <span class="token function">getBottomPaddingOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">final</span> <span class="token class-name">ScrollabilityCache</span> scrollabilityCache <span class="token operator">=</span> mScrollCache<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">float</span> fadeHeight <span class="token operator">=</span> scrollabilityCache<span class="token punctuation">.</span>fadingEdgeLength<span class="token punctuation">;</span>
        <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> fadeHeight<span class="token punctuation">;</span>

        <span class="token comment">// clip the fade length if top and bottom fades overlap</span>
        <span class="token comment">// overlapping fades produce odd-looking artifacts</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>verticalEdges <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>top <span class="token operator">+</span> length <span class="token operator">&gt;</span> bottom <span class="token operator">-</span> length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            length <span class="token operator">=</span> <span class="token punctuation">(</span>bottom <span class="token operator">-</span> top<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// also clip horizontal fades if necessary</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>horizontalEdges <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> length <span class="token operator">&gt;</span> right <span class="token operator">-</span> length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            length <span class="token operator">=</span> <span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>verticalEdges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            topFadeStrength <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token function">getTopFadingEdgeStrength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            drawTop <span class="token operator">=</span> topFadeStrength <span class="token operator">*</span> fadeHeight <span class="token operator">&gt;</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
            bottomFadeStrength <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token function">getBottomFadingEdgeStrength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            drawBottom <span class="token operator">=</span> bottomFadeStrength <span class="token operator">*</span> fadeHeight <span class="token operator">&gt;</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>horizontalEdges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            leftFadeStrength <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token function">getLeftFadingEdgeStrength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            drawLeft <span class="token operator">=</span> leftFadeStrength <span class="token operator">*</span> fadeHeight <span class="token operator">&gt;</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
            rightFadeStrength <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token function">getRightFadingEdgeStrength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            drawRight <span class="token operator">=</span> rightFadeStrength <span class="token operator">*</span> fadeHeight <span class="token operator">&gt;</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        saveCount <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getSaveCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> solidColor <span class="token operator">=</span> <span class="token function">getSolidColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>solidColor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>drawTop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                canvas<span class="token punctuation">.</span><span class="token function">saveUnclippedLayer</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> top <span class="token operator">+</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>drawBottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                canvas<span class="token punctuation">.</span><span class="token function">saveUnclippedLayer</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> bottom <span class="token operator">-</span> length<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>drawLeft<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                canvas<span class="token punctuation">.</span><span class="token function">saveUnclippedLayer</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> left <span class="token operator">+</span> length<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>drawRight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                canvas<span class="token punctuation">.</span><span class="token function">saveUnclippedLayer</span><span class="token punctuation">(</span>right <span class="token operator">-</span> length<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            scrollabilityCache<span class="token punctuation">.</span><span class="token function">setFadeColor</span><span class="token punctuation">(</span>solidColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Step 3, draw the content</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dirtyOpaque<span class="token punctuation">)</span> <span class="token function">onDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Step 4, draw the children</span>
        <span class="token function">dispatchDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Step 5, draw the fade effect and restore layers</span>
        <span class="token keyword">final</span> <span class="token class-name">Paint</span> p <span class="token operator">=</span> scrollabilityCache<span class="token punctuation">.</span>paint<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Matrix</span> matrix <span class="token operator">=</span> scrollabilityCache<span class="token punctuation">.</span>matrix<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Shader</span> fade <span class="token operator">=</span> scrollabilityCache<span class="token punctuation">.</span>shader<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>drawTop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            matrix<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> fadeHeight <span class="token operator">*</span> topFadeStrength<span class="token punctuation">)</span><span class="token punctuation">;</span>
            matrix<span class="token punctuation">.</span><span class="token function">postTranslate</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">)</span><span class="token punctuation">;</span>
            fade<span class="token punctuation">.</span><span class="token function">setLocalMatrix</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
            p<span class="token punctuation">.</span><span class="token function">setShader</span><span class="token punctuation">(</span>fade<span class="token punctuation">)</span><span class="token punctuation">;</span>
            canvas<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> top <span class="token operator">+</span> length<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>drawBottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            matrix<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> fadeHeight <span class="token operator">*</span> bottomFadeStrength<span class="token punctuation">)</span><span class="token punctuation">;</span>
            matrix<span class="token punctuation">.</span><span class="token function">postRotate</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            matrix<span class="token punctuation">.</span><span class="token function">postTranslate</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
            fade<span class="token punctuation">.</span><span class="token function">setLocalMatrix</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
            p<span class="token punctuation">.</span><span class="token function">setShader</span><span class="token punctuation">(</span>fade<span class="token punctuation">)</span><span class="token punctuation">;</span>
            canvas<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> bottom <span class="token operator">-</span> length<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>drawLeft<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            matrix<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> fadeHeight <span class="token operator">*</span> leftFadeStrength<span class="token punctuation">)</span><span class="token punctuation">;</span>
            matrix<span class="token punctuation">.</span><span class="token function">postRotate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            matrix<span class="token punctuation">.</span><span class="token function">postTranslate</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">)</span><span class="token punctuation">;</span>
            fade<span class="token punctuation">.</span><span class="token function">setLocalMatrix</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
            p<span class="token punctuation">.</span><span class="token function">setShader</span><span class="token punctuation">(</span>fade<span class="token punctuation">)</span><span class="token punctuation">;</span>
            canvas<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> left <span class="token operator">+</span> length<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>drawRight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            matrix<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> fadeHeight <span class="token operator">*</span> rightFadeStrength<span class="token punctuation">)</span><span class="token punctuation">;</span>
            matrix<span class="token punctuation">.</span><span class="token function">postRotate</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            matrix<span class="token punctuation">.</span><span class="token function">postTranslate</span><span class="token punctuation">(</span>right<span class="token punctuation">,</span> top<span class="token punctuation">)</span><span class="token punctuation">;</span>
            fade<span class="token punctuation">.</span><span class="token function">setLocalMatrix</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
            p<span class="token punctuation">.</span><span class="token function">setShader</span><span class="token punctuation">(</span>fade<span class="token punctuation">)</span><span class="token punctuation">;</span>
            canvas<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span>right <span class="token operator">-</span> length<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        canvas<span class="token punctuation">.</span><span class="token function">restoreToCount</span><span class="token punctuation">(</span>saveCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">drawAutofilledHighlight</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Overlay is part of the content and draws beneath Foreground</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mOverlay <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>mOverlay<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mOverlay<span class="token punctuation">.</span><span class="token function">getOverlayView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dispatchDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Step 6, draw decorations (foreground, scrollbars)</span>
        <span class="token function">onDrawForeground</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">debugDraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">debugDrawFocus</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br></div></div><ul><li>onDraw里重要方法</li></ul> <table><thead><tr><th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>postInvalidate()</td> <td>1.重绘UI<br>2.调用postInvalidate()后系统会重新调用onDraw方法画一次</td></tr> <tr><td>postInvalidate(int left, int top, int right, int bottom)</td> <td></td></tr> <tr><td>postInvalidateDelayed(long delayMilliseconds)</td> <td></td></tr> <tr><td>postInvalidateDelayed(long delayMilliseconds, int left, int top,int right, int bottom)</td> <td></td></tr> <tr><td></td> <td></td></tr> <tr><td>invalidate()</td> <td>1.在UI线程自身中使用<br>2.不能直接在线程中调用</td></tr></tbody></table> <hr> <hr> <hr> <h4 id="自定义组合控件"><a href="#自定义组合控件" class="header-anchor">#</a> 自定义组合控件</h4> <p>自定义组合控件就是将多个控件组合成为一个新的控件，主要解决多次重复使用同一类型的布局,如dailog等，我们都可以把他们组合成一个新的控件。基本流程如下:</p> <ul><li>1.编写布局文件</li> <li>2.实现构造方法</li> <li><ol start="3"><li>初始化UI</li></ol></li> <li><ol start="4"><li>提供对外的方法</li></ol></li> <li><ol start="5"><li>在布局当中引用该控件</li></ol></li></ul> <h5 id="编写布局文件"><a href="#编写布局文件" class="header-anchor">#</a> 编写布局文件</h5> <p>编写布局文件dialog_friend.xml，源码如下图:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/dialog_bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/dialog_bg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tip<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/dialog_bg_top<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>温馨提示<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#FFD306<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>


        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollView</span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_above</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@id/view<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/tip<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@color/colorWhite<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_marginRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提示信息<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollView</span><span class="token punctuation">&gt;</span></span>


        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/view<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_above</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/ll_btn<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#c0c0c0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>
            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/ll_btn<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/dialog_bg_bottom<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/btn_know<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0dp<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>paddingBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15dp<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>paddingTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15dp<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>知道了<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#FFD306<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>17dp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">&gt;</span></span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br></div></div><h5 id="实现构造方法"><a href="#实现构造方法" class="header-anchor">#</a> 实现构造方法</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriendDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span> <span class="token punctuation">{</span>


    <span class="token keyword">private</span> <span class="token class-name">Timer</span> timer<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> second <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">TextView</span> tv_know<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LinearLayout</span> linearLayout<span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    
    <span class="token keyword">public</span> <span class="token class-name">FriendDialog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token keyword">int</span> width<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">,</span> <span class="token annotation punctuation">@IdRes</span> <span class="token keyword">int</span> layout<span class="token punctuation">,</span> <span class="token keyword">int</span> style<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initView</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
    
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h5 id="初始化ui"><a href="#初始化ui" class="header-anchor">#</a> 初始化UI</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
         <span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token function">getLayoutInflater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>dialog_friend<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setContentView</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Window</span> window <span class="token operator">=</span> <span class="token function">getWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WindowManager<span class="token punctuation">.</span>LayoutParams</span> params <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span>gravity <span class="token operator">=</span> <span class="token class-name">Gravity</span><span class="token punctuation">.</span>CENTER<span class="token punctuation">;</span>
        params<span class="token punctuation">.</span>height <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heightPixels <span class="token operator">-</span> <span class="token number">60</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span>width <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>widthPixels <span class="token operator">-</span> <span class="token number">60</span><span class="token punctuation">;</span>


        <span class="token comment">//去背景</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBackgroundDrawableResource</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>transparent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">setAttributes</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setCancelable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        linearLayout <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>ll_btn<span class="token punctuation">)</span><span class="token punctuation">;</span>

        linearLayout<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                mHandler<span class="token punctuation">.</span><span class="token function">sendEmptyMessage</span><span class="token punctuation">(</span>destorytimer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        tv_know <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_know<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv_know<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;知道了( &quot;</span> <span class="token operator">+</span> second <span class="token operator">+</span> <span class="token string">&quot;s )&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h5 id="提供对外的方法"><a href="#提供对外的方法" class="header-anchor">#</a> 提供对外的方法</h5> <p>针对内部相关控件提供相关接口，比如文字大小颜色，按钮的使能与否等各种功能</p> <h5 id="在布局当中引用该控件"><a href="#在布局当中引用该控件" class="header-anchor">#</a> 在布局当中引用该控件</h5> <p>和正常控件调用一样，也采用findViewById来获取，对外暴露相关需要的接口</p> <hr> <h4 id="继承系统控件"><a href="#继承系统控件" class="header-anchor">#</a> 继承系统控件</h4> <ul><li>继承系统的控件可以分为继承View子类（如TextVIew、Button等）</li> <li>继承ViewGroup子类(如LinearLayout等)</li></ul> <hr> <h4 id="进阶"><a href="#进阶" class="header-anchor">#</a> 进阶</h4> <h5 id="paint专题"><a href="#paint专题" class="header-anchor">#</a> Paint专题</h5> <table><thead><tr><th>常量</th> <th>说明</th></tr></thead> <tbody><tr><td>ANTI_ALIAS_FLAG</td> <td></td></tr> <tr><td>CURSOR_AFTER</td> <td></td></tr> <tr><td>CURSOR_AT</td> <td></td></tr> <tr><td>CURSOR_AT_OR_AFTER</td> <td></td></tr> <tr><td>CURSOR_AT_OR_BEFORE</td> <td></td></tr> <tr><td>CURSOR_BEFORE</td> <td></td></tr> <tr><td>DEV_KERN_TEXT_FLAG</td> <td></td></tr> <tr><td>DITHER_FLAG</td> <td></td></tr> <tr><td>EMBEDDED_BITMAP_TEXT_FLAG</td> <td></td></tr> <tr><td>END_HYPHEN_EDIT_INSERT_ARMENIAN_HYPHEN</td> <td></td></tr> <tr><td>END_HYPHEN_EDIT_INSERT_HYPHEN</td> <td></td></tr> <tr><td>END_HYPHEN_EDIT_INSERT_MAQAF</td> <td></td></tr> <tr><td></td> <td></td></tr></tbody></table> <hr> <table><thead><tr><th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>Paint(Paint paint)</td> <td></td></tr> <tr><td>Paint(int flags)</td> <td></td></tr> <tr><td>Paint()</td> <td></td></tr> <tr><td>reset()</td> <td>重置Paint</td></tr> <tr><td>setStyle(Style style)</td> <td>设置绘制模式</td></tr> <tr><td>setColor(int color)</td> <td>设置颜色</td></tr> <tr><td>setStrokeWidth(float width)</td> <td>设置线条宽度,画笔样式为空心时，设置空心画笔的宽度</td></tr> <tr><td>setTextSize(float textSize)</td> <td>设置文字大小</td></tr> <tr><td>.setAntiAlias(boolean aa)</td> <td>设置抗锯齿开关</td></tr> <tr><td>setAlpha(int a)</td> <td>设置画笔的透明度[0-255]，0是完全透明，255是完全不透明</td></tr> <tr><td>setColorFilter(ColorFilter filter)</td> <td>设置图形重叠时的显示方式，下面来演示一下</td></tr> <tr><td>setARGB(int a, int r, int g, int b)</td> <td>设置画笔颜色，argb形式alpha，red，green，blue每个范围都是[0-255]</td></tr> <tr><td>setTextScaleX(float scaleX)</td> <td>设置字体的水平方向的缩放因子，默认值为1，大于1时会沿X轴水平放大，小于1时会沿X轴水平缩小</td></tr> <tr><td>,setTypeface(Typeface typeface)</td> <td>设置字体样式</td></tr> <tr><td>setFakeBoldText(boolean fakeBoldText)</td> <td>设置文本粗体</td></tr> <tr><td>setStrikeThruText(boolean strikeThruText)</td> <td>设置文本的删除线</td></tr> <tr><td>setUnderlineText(boolean underlineText)</td> <td>设置文本的下划线</td></tr> <tr><td>setFlags(int flags)</td> <td>设置一些标志，比如抗锯齿，下划线等等</td></tr> <tr><td>setLetterSpacing(float letterSpacing)</td> <td>设置行的间距，默认值是0，负值行间距会收缩</td></tr> <tr><td>setStrokeMiter(float miter)</td> <td>当style为Stroke或StrokeAndFill时设置连接处的倾斜度，这个值必须大于0，看一下演示结果</td></tr> <tr><td>setDither(boolean dither)</td> <td>设置是否抖动，如果不设置感觉就会有一些僵硬的线条，如果设置图像就会看的更柔和一些</td></tr> <tr><td>setStrokeCap(Paint.Cap cap)</td> <td>设置线冒样式，取值有Cap.ROUND(圆形线冒)、Cap.SQUARE(方形线冒)、Paint.Cap.BUTT(无线冒)</td></tr> <tr><td>setStrokeJoin(Paint.Join join)</td> <td>设置线段连接处样式，取值有：Join.MITER（结合处为锐角）、Join.Round(结合处为圆弧)、Join.BEVEL(结合处为直线)</td></tr></tbody></table> <h5 id="cavcas专题"><a href="#cavcas专题" class="header-anchor">#</a> Cavcas专题</h5> <hr> <table><thead><tr><th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>drawRect(RectF rect, Paint paint)</td> <td>绘制区域，参数一为RectF一个区域</td></tr> <tr><td>drawPath(Path path, Paint paint)</td> <td>绘制一个路径，参数一为Path路径对象</td></tr> <tr><td>drawBitmap(Bitmap bitmap, Rect src, Rect dst, Paint paint)</td> <td>贴图，参数一就是我们常规的Bitmap对象，参数二是源区域(这里是bitmap)，参数三是目标区域(应该在canvas的位置和大小)，参数四是Paint画刷对象，因为用到了缩放和拉伸的可能，当原始Rect不等于目标Rect时性能将会有大幅损失。</td></tr> <tr><td>drawLine(float startX, float startY, float stopX, float stopY, Paintpaint)</td> <td>画线，参数一起始点的x轴位置，参数二起始点的y轴位置，参数三终点的x轴水平位置，参数四y轴垂直位置，最后一个参数为Paint 画刷对象</td></tr> <tr><td>drawPoint(float x, float y, Paint paint)</td> <td>画点，参数一水平x轴，参数二垂直y轴，第三个参数为Paint对象</td></tr> <tr><td>drawText(String text, float x, floaty, Paint paint)</td> <td>渲染文本，Canvas类除了上面的还可以描绘文字，参数一是String类型的文本，参数二x轴，参数三y轴，参数四是Paint对象</td></tr> <tr><td>drawOval(RectF oval, Paint paint)</td> <td>画椭圆，参数一是扫描区域，参数二为paint对象</td></tr> <tr><td>drawCircle(float cx, float cy, float radius,Paint paint)</td> <td>绘制圆，参数一是中心点的x轴，参数二是中心点的y轴，参数三是半径，参数四是paint对象</td></tr> <tr><td>drawArc(RectF oval, float startAngle, float sweepAngle, boolean useCenter, Paint paint)</td> <td>画弧，参数一是RectF对象，一个矩形区域椭圆形的界限用于定义在形状、大小、电弧，参数二是起始角(度)在电弧的开始，参数三扫描角(度)开始顺时针测量的，参数四是如果这是真的话,包括椭圆中心的电弧,并关闭它,如果它是假这将是一个弧线,参数五是Paint对象</td></tr></tbody></table> <h5 id="path专题"><a href="#path专题" class="header-anchor">#</a> Path专题</h5> <p>1.<br>2.</p> <table><thead><tr><th>变量</th> <th>说明</th></tr></thead> <tbody><tr><td>Path.Direction.CW</td> <td>顺时针</td></tr> <tr><td>Path.Direction.CCW</td> <td>逆时针</td></tr> <tr><td>Path.FillType.WINDING</td> <td></td></tr> <tr><td>Path.FillType.EVEN_ODD</td> <td></td></tr> <tr><td>Path.FillType.INVERSE_WINDING</td> <td></td></tr> <tr><td>Path.FillType.INVERSE_EVEN_ODD</td> <td></td></tr> <tr><td>Path.Op.DIFFERENCE</td> <td></td></tr> <tr><td>Path.Op.INTERSECT</td> <td></td></tr> <tr><td>Path.Op.UNION</td> <td></td></tr> <tr><td>Path.Op.XOR</td> <td></td></tr> <tr><td>Path.Op.REVERSE_DIFFERENCE</td> <td></td></tr></tbody></table> <hr> <table><thead><tr><th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>lineTo(float x, float y)</td> <td>1.从上一个点到参数坐标点之间连一条线<br>2.如果没有进行过操作则默认点为坐标原点</td></tr> <tr><td>moveTo(float x, float y)</td> <td>1.移动下一次操作的起点位置<br>2.不影响上一次操作，影响下一次操作</td></tr> <tr><td>setLastPoint(float dx, float dy)</td> <td>1.设置之前操作的最后一个点位置	<br>2.影响上一次操作，影响下一次操作</td></tr> <tr><td>close()</td> <td>1.连接当前最后一个点和最初的一个点(如果两个点不重合的话)，最终形成一个封闭的图形<br>2.close的作用是封闭路径，与连接当前最后一个点和第一个点并不等价。如果连接了最后一个点和第一个点仍然无法形成封闭图形，则close什么 也不做</td></tr> <tr><td>addCircle(float x, float y, float radius, Direction dir)</td> <td>1.<br>2.</td></tr> <tr><td>addRect(float left, float top, float right, float bottom, Direction dir)</td> <td></td></tr> <tr><td>reset()</td> <td></td></tr> <tr><td>rewind()</td> <td></td></tr> <tr><td>set(Path src)</td> <td></td></tr> <tr><td>op(Path path, Op op)</td> <td></td></tr> <tr><td>op(Path path1, Path path2, Op op)</td> <td></td></tr> <tr><td>isConvex()</td> <td></td></tr> <tr><td>setFillType(FillType ft)</td> <td></td></tr> <tr><td>getFillType()</td> <td></td></tr> <tr><td>isInverseFillType()</td> <td></td></tr> <tr><td>toggleInverseFillType()</td> <td></td></tr> <tr><td>isEmpty()</td> <td></td></tr> <tr><td>isRect(RectF rect)</td> <td></td></tr> <tr><td>computeBounds(RectF bounds, boolean exact)</td> <td></td></tr> <tr><td>incReserve(int extraPtCount)</td> <td></td></tr> <tr><td>rMoveTo(float dx, float dy)</td> <td></td></tr> <tr><td>rLineTo(float dx, float dy)</td> <td></td></tr> <tr><td>quadTo(float x1, float y1, float x2, float y2)</td> <td></td></tr> <tr><td>rQuadTo(float dx1, float dy1, float dx2, float dy2)</td> <td></td></tr> <tr><td>cubicTo(float x1, float y1, float x2, float y2, float x3, float y3)</td> <td></td></tr> <tr><td>rCubicTo(float x1, float y1, float x2, float y2, float x3, float y3)</td> <td></td></tr> <tr><td>arcTo(RectF oval, float startAngle, float sweepAngle, boolean forceMoveTo)</td> <td></td></tr> <tr><td>arcTo(RectF oval, float startAngle, float sweepAngle)</td> <td></td></tr> <tr><td>arcTo(float left, float top, float right, float bottom, float startAngle,float sweepAngle, boolean forceMoveTo)</td> <td></td></tr> <tr><td>detectSimplePath(float left, float top, float right, float bottom, Direction dir)</td> <td></td></tr> <tr><td>addRect(RectF rect, Direction dir)</td> <td></td></tr> <tr><td>addRect(float left, float top, float right, float bottom, Direction dir)</td> <td></td></tr> <tr><td>addOval(RectF oval, Direction dir)</td> <td></td></tr> <tr><td>addOval(float left, float top, float right, float bottom, Direction dir)</td> <td></td></tr> <tr><td>addCircle(float x, float y, float radius, Direction dir)</td> <td></td></tr> <tr><td>addArc(RectF oval, float startAngle, float sweepAngle)</td> <td></td></tr> <tr><td>addArc(float left, float top, float right, float bottom, float startAngle, float sweepAngle)</td> <td></td></tr> <tr><td>addRoundRect(RectF rect, float rx, float ry, Direction dir)</td> <td></td></tr> <tr><td>addRoundRect(float left, float top, float right, float bottom, float rx, float ry, Direction dir)</td> <td></td></tr> <tr><td>addPath(Path src, float dx, float dy)</td> <td></td></tr> <tr><td>addPath(Path src)</td> <td></td></tr> <tr><td>addPath(Path src, Matrix matrix)</td> <td></td></tr> <tr><td>offset(float dx, float dy, Path dst)</td> <td></td></tr> <tr><td>offset(float dx, float dy)</td> <td></td></tr> <tr><td>transform(Matrix matrix, Path dst)</td> <td></td></tr> <tr><td>transform(Matrix matrix)</td> <td></td></tr></tbody></table> <h5 id="bitmap专题"><a href="#bitmap专题" class="header-anchor">#</a> Bitmap专题</h5> <hr> <h4 id="面试"><a href="#面试" class="header-anchor">#</a> 面试</h4> <h1 id="坐标系-2"><a href="#坐标系-2" class="header-anchor">#</a> 坐标系</h1> <h2 id="_1-屏幕坐标系"><a href="#_1-屏幕坐标系" class="header-anchor">#</a> 1.屏幕坐标系</h2> <p>由于移动设备一般定义屏幕左上角为坐标原点，向右为x轴增大方向，向下为y轴增大方向，<br>
所以在手机屏幕上的坐标系与数学中常见的坐标系是稍微有点差别的，详情如下：</p> <p><img src="https://i.loli.net/2018/05/11/5af4f195649d4.png" alt="TIM截图20180511092736.png"></p> <h2 id="_2-view坐标系"><a href="#_2-view坐标系" class="header-anchor">#</a> 2.View坐标系</h2> <p>注意：View的坐标系统是相对于父控件而言的.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token function">getTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//获取子View左上角距父View顶部的距离</span>
<span class="token function">getLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//获取子View左上角距父View左侧的距离</span>
<span class="token function">getBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//获取子View右下角距父View顶部的距离</span>
<span class="token function">getRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//获取子View右下角距父View左侧的距离</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://i.loli.net/2018/05/11/5af502c909af0.png" alt="TIM截图20180511103846.png"></p> <h2 id="_3-motionevent中-get-和-getraw-的区别"><a href="#_3-motionevent中-get-和-getraw-的区别" class="header-anchor">#</a> 3.MotionEvent中 get 和 getRaw 的区别</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//触摸点相对于其所在组件坐标系的坐标</span>
event<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

event<span class="token punctuation">.</span><span class="token function">getRawX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//触摸点相对于屏幕默认坐标系的坐标</span>
event<span class="token punctuation">.</span><span class="token function">getRawY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h1 id="角度与弧度"><a href="#角度与弧度" class="header-anchor">#</a> 角度与弧度</h1> <h2 id="一-前言"><a href="#一-前言" class="header-anchor">#</a> 一.前言</h2> <h3 id="_1-为什么讲这个"><a href="#_1-为什么讲这个" class="header-anchor">#</a> 1.为什么讲这个？</h3> <p>在我们自定义View，尤其是制作一些复杂炫酷的效果的时候，实际上是将一些简单的东西通过数学上精密的计算组合到一起形成的效果。</p> <p>这其中可能会涉及到画布的相关操作(旋转)，以及一些正余弦函数的计算等，这些内容就会用到一些角度、弧度相关的知识。</p> <h3 id="_2-为什么对角的描述存在角度与弧度两种单位"><a href="#_2-为什么对角的描述存在角度与弧度两种单位" class="header-anchor">#</a> 2.为什么对角的描述存在角度与弧度两种单位？</h3> <p>简单来说就是为了方便，为了精确描述一个角的大小引入了角度与弧度的概念。</p> <p>由于两者进制是不同的(角度是60进制，弧度是10进制),在合适的地方使用合适的单位来描述会更加方便。</p> <p>例如： 角度是60进位制，遇到30°6′这样的角，应该转化为10进制的30.1°。但弧度就不需要，因为弧度本身就是十进制的实数。</p> <h2 id="二-角度与弧度的定义"><a href="#二-角度与弧度的定义" class="header-anchor">#</a> 二.角度与弧度的定义</h2> <p>角度和弧度一样都是描述角的一种度量单位，下面是它们的定义：</p> <p><strong>角度</strong>：两条射线从圆心向圆周射出，形成一个夹角和夹角正对的一段弧。当这段弧长正好等于圆周长的360分之一时，两条射线的夹角的大小为1度.</p> <p><strong>弧度</strong>：两条射线从圆心向圆周射出，形成一个夹角和夹角正对的一段弧。当这段弧长正好等于圆的半径时，两条射线的夹角大小为1弧度.</p> <p><strong>角度和弧度关系</strong>：360(角度) = 2π(弧度) 、 180(角度) = π(弧度)</p> <h1 id="颜色"><a href="#颜色" class="header-anchor">#</a> 颜色</h1> <h2 id="android支持的颜色模式"><a href="#android支持的颜色模式" class="header-anchor">#</a> Android支持的颜色模式：</h2> <table><thead><tr><th>颜色模式</th> <th>解释</th></tr></thead> <tbody><tr><td>ARGB8888</td> <td>四通道高精度(32位)</td></tr> <tr><td>ARGB4444</td> <td>四通道低精度(16位)</td></tr> <tr><td>RGB565</td> <td>屏幕默认模式(16位)</td></tr> <tr><td>Alpha8</td> <td>仅有透明通道(8位)</td></tr></tbody></table> <p>其中 A R G B 的取值范围均为0<sub>255(即16进制的0x00</sub>0xff)</p> <p>A 从ox00到oxff表示从透明到不透明。</p> <p>RGB 从0x00到0xff表示颜色从浅到深。</p> <h2 id="几种创建或使用颜色的方式"><a href="#几种创建或使用颜色的方式" class="header-anchor">#</a> 几种创建或使用颜色的方式</h2> <h3 id="java中定义颜色"><a href="#java中定义颜色" class="header-anchor">#</a> Java中定义颜色</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">int</span> color<span class="token operator">=</span><span class="token class-name">Color</span><span class="token punctuation">.</span>GRAY<span class="token punctuation">;</span>  <span class="token comment">// 灰色</span>
<span class="token comment">// Color类提供的颜色仅为有限的几个</span>

<span class="token keyword">int</span> color <span class="token operator">=</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">argb</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 半透明红色</span>

<span class="token keyword">int</span> color <span class="token operator">=</span> <span class="token number">0xaaff0000</span><span class="token punctuation">;</span>                   <span class="token comment">// 带有透明度的红色</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="xml里定义颜色"><a href="#xml里定义颜色" class="header-anchor">#</a> xml里定义颜色</h3> <p>在/res/values/color.xml 文件中如下定义：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#ff0000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#00ff00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>color</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="在java里引用xml中定义的颜色"><a href="#在java里引用xml中定义的颜色" class="header-anchor">#</a> 在java里引用xml中定义的颜色</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> color <span class="token operator">=</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="颜色混合模式-alpha通道相关"><a href="#颜色混合模式-alpha通道相关" class="header-anchor">#</a> 颜色混合模式(Alpha通道相关)</h2> <p>Alpha通道主要在两个图像混合的时候生效。</p> <p>默认情况下，当一个颜色绘制到Canvas上时的混合模式是这样计算的：</p> <p><strong>(RGB通道) 最终颜色 = 绘制的颜色 + (1 - 绘制颜色的透明度) × Canvas上的原有颜色</strong></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/leo94666/leo94666.github.io/edit/master/docs/notes/01.前端/01.Android/010.Android自定义View.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Android" title="标签">#Android</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022-04-28, 11:21:32</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:719947897@qq.com" title="发邮件" target="_blank" class="iconfont icon-email"></a><a href="https://github.com/leo94666" title="客官，给个Star吧，≥Ö‿Ö≤" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/leo94666" target="_blank" title="本站主题">Leo</a> 
    | Copyright © 2016-2022
    <span>Leo | <a href="https://github.com/leo94666/leo94666.github.io/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-back-to-top" style="display:none;"></div> <div title="赏" class="button blur shang iconfont icon-shang"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-comment" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-theme"><ul class="select-box" style="display:none;"><li class="iconfont icon-auto">
          跟随系统
        </li><li class="iconfont icon-light">
          浅色模式
        </li><li class="iconfont icon-dark">
          深色模式
        </li><li class="iconfont icon-read">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div><div class="el-dialog__wrapper" style="display:none;" data-v-2068c05d data-v-2068c05d><div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog el-dialog--center" style="margin-top:35vh;width:0px;"><div class="el-dialog__header"><span class="el-dialog__title"></span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div><!----></div></div>
    <script src="/assets/js/app.547c0bf0.js" defer></script><script src="/assets/js/6.1a89cbae.js" defer></script><script src="/assets/js/45.38681ba2.js" defer></script><script src="/assets/js/8.e2c6a3e6.js" defer></script>
  </body>
</html>
